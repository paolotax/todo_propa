= simple_form_for @appunto do |f|
  
  .control-group
    %label.control-label{ for: :cliente_id } Cliente: 
    .controls
      = f.collection_select :cliente_id, current_user.clienti.order(:titolo), :id, :titolo, {:include_blank => true}, {:class => 'chzn-select', "data-placeholder" => "Seleziona il cliente..."} 

  %ul.nav.nav-pills.tab
    %li
      %a{ href: "#info",      "data-toggle" => "pill"} Appunto...
    %li
      %a{ href: "#dettaglio", "data-toggle" => "pill"} Inserisci dettaglio...
    %li
      %a{ href: "#completa",  "data-toggle" => "pill"} Completa ordine...

  .tab-content

    #info.tab-pane.fade.active.in
      = f.input :destinatario
      = f.input :note, :input_html => { rows: 5 }
      = f.input :telefono
      = f.input :email

    #dettaglio.tab-pane.fade
      .control-group
        %label.control-label Condizioni di pagamento:
        .controls
          %label.checkbox
            = radio_button_tag 'prezzo', 'consigliato', true
            prezzo consigliato
          %label.checkbox.form-inline
            = radio_button_tag 'prezzo', 'con_sconto', false
            sconto
            = select_tag 'prezzo', options_for_select([0, 10, 15, 18, 20, 25, 30, 35, 43]), class: 'input-small'
      
      .control-group
        = render 'righe/form'
        #righe
          .empty
            Nessuna riga in questo ordine...
          = f.fields_for :righe do |riga|
            = div_for riga.object, class: 'form-inline' do
              = riga.hidden_field :id
              = riga.hidden_field :libro_id
              .titolo= riga.object.libro.titolo
              = riga.text_field :quantita, class: 'input-mini riga_quantita'
              = riga.text_field :prezzo,   class: 'input-mini riga_prezzo'
              = riga.text_field :sconto,   class: 'input-mini riga_sconto'

    #completa.tab-pane.fade
      = f.input :stato
  
  .control-group
    .controls
      %button{:class => "btn btn-primary", :type => "submit", id: "new_appunto_submit"} Salva
  
