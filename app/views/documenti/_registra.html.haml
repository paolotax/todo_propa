.dropdown
  = link_to "Registra",  "#", class: "btn-small btn-warning dropdown-toggle", "data-toggle" => "dropdown" 

  %ul.dropdown-menu{ role: "menu", "aria-labelledby" => "dLabel" }

    %li.dropdown-submenu
      %a{ tabindex: "-1", href: "#"}
        Fattura
      %ul.dropdown-menu
        %li
          = form_for c, url: registra_documento_cliente_path(c), method: "put", html: {class: "form-inline"} do |f|
            = hidden_field_tag 'data_documento', "ultima"
            = hidden_field_tag 'causale_id', 1
            - for a, righe in r.group_by(&:appunto) do
              = hidden_field_tag "appunto_ids[]", a.id 
            = f.submit "ultima data inserita", class: "btn btn-link"
        
        %li.divider
        
        %li
          = form_for c, url: registra_documento_cliente_path(c), method: "put" do |f|
            = hidden_field_tag 'causale_id', 1
            - for a, righe in r.group_by(&:appunto) do
              = hidden_field_tag "appunto_ids[]", a.id 
            = f.submit "oggi", class: "btn btn-link"
    
    %li.divider
    
    %li.dropdown-submenu
      %a{ tabindex: "-1", href: "#"}
        Buono di consegna
      %ul.dropdown-menu
        %li
          = form_for c, url: registra_documento_cliente_path(c), method: "put" do |f|
            = hidden_field_tag 'data_documento', "ultima"
            = hidden_field_tag 'causale_id', 2
            - for a, righe in r.group_by(&:appunto) do
              = hidden_field_tag "appunto_ids[]", a.id 
            = f.submit "ultima data inserita", class: "btn btn-link"
        
        %li.divider
        
        %li
          = form_for c, url: registra_documento_cliente_path(c), method: "put" do |f|
            = hidden_field_tag 'causale_id', 2
            - for a, righe in r.group_by(&:appunto) do
              = hidden_field_tag "appunto_ids[]", a.id 
            = f.submit "oggi", class: "btn btn-link"